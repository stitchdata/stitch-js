!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Stitch={})}(this,function(t){"use strict";var f=Object.freeze({BOOTSTRAP:"bootstrap",CLOSED:"closed",CONNECTION_CREATED:"connectionCreated",CONNECTION_UPDATED:"connectionUpdated",ERROR_LOADING_CONNECTION:"errorLoadingConnection",ERROR_LOADING_INTEGRATION_TYPE:"errorLoadingIntegrationType",ERROR_UPGRADING_EPHEMERAL_TOKEN:"errorUpgradingEphemeralToken",INTEGRATION_FLOW_COMPLETED:"integrationFlowCompleted",INTEGRATION_FORM_CLOSE:"integrationFormClose",AUTHORIZE_SUCCESS:"authorizeSuccess",AUTHORIZE_FAILURE:"authorizeFailure"});function e(t,e){return t(e={exports:{}},e.exports),e.exports}function v(t,e){return r.call(t,e)}function a(t){try{return!!t()}catch(t){return!0}}function i(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}function y(r,o,t){if(i(r),void 0===o)return r;switch(t){case 1:return function(t){return r.call(o,t)};case 2:return function(t,e){return r.call(o,t,e)};case 3:return function(t,e,n){return r.call(o,t,e,n)}}return function(){return r.apply(o,arguments)}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _=e(function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)}),r={}.hasOwnProperty,h=!a(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),O=e(function(t){var e=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=e)}),s=(O.version,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),o=function(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t};function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function p(t){return"object"===(void 0===t?"undefined":s(t))?null!==t:"function"==typeof t}function d(t){if(!p(t))throw TypeError(t+" is not an object!");return t}function b(t){return T?w.createElement(t):{}}function m(t,e){if(!p(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!p(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!p(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function E(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function S(t,e,n){var r,o,i,c=t&S.F,u=t&S.G,a=t&S.S,s=t&S.P,f=t&S.B,l=t&S.W,h=u?O:O[e]||(O[e]={}),p=h[C],d=u?_:a?_[e]:(_[e]||{})[C];for(r in u&&(n=e),n)(o=!c&&d&&void 0!==d[r])&&v(h,r)||(i=o?d[r]:n[r],h[r]=u&&"function"!=typeof d[r]?n[r]:f&&o?y(i,_):l&&d[r]==i?function(r){function t(t,e,n){if(this instanceof r){switch(arguments.length){case 0:return new r;case 1:return new r(t);case 2:return new r(t,e)}return new r(t,e,n)}return r.apply(this,arguments)}return t[C]=r[C],t}(i):s&&"function"==typeof i?y(Function.call,i):i,s&&((h.virtual||(h.virtual={}))[r]=i,t&S.R&&p&&!p[r]&&A(p,r,i)))}var g=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},w=_.document,T=p(w)&&p(w.createElement),j=!h&&!a(function(){return 7!=Object.defineProperty(b("div"),"a",{get:function(){return 7}}).a}),P=Object.defineProperty,R={f:h?Object.defineProperty:function(t,e,n){if(d(t),e=m(e,!0),d(n),j)try{return P(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},A=h?function(t,e,n){return R.f(t,e,E(1,n))}:function(t,e,n){return t[e]=n,t},C="prototype";S.F=1,S.G=2,S.S=4,S.P=8,S.B=16,S.W=32,S.U=64,S.R=128;function I(t){return"Symbol(".concat(void 0===t?"":t,")_",(++$+tt).toString(36))}function L(t,e,n){t&&!v(t=n?t:t.prototype,it)&&ot(t,it,{configurable:!0,value:e})}function N(t){return at.call(t).slice(8,-1)}function F(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}function k(t){return st(F(t))}function x(t){return isNaN(t=+t)?0:(0<t?lt:ft)(t)}function D(t){return 0<t?ht(x(t),9007199254740991):0}function M(t){return vt[t]||(vt[t]=I(t))}function U(t,e){var n,r=k(t),o=0,i=[];for(n in r)n!=_t&&v(r,n)&&i.push(n);for(;e.length>o;)v(r,n=e[o++])&&(~yt(i,n)||i.push(n));return i}function G(t){return Object(F(t))}function W(){}function z(t){var e=qt[t]=At(zt[Zt]);return e._k=t,e}function H(t,e){d(t);for(var n,r=function(t){var e=bt(t),n=mt.f;if(n)for(var r,o=n(t),i=Et.f,c=0;o.length>c;)i.call(t,r=o[c++])&&e.push(r);return e}(e=k(e)),o=0,i=r.length;o<i;)oe(t,n=r[o++],e[n]);return t}function Y(t){var e=Bt.call(this,t=m(t,!0));return!(this===Xt&&v(qt,t)&&!v(Qt,t))&&(!(e||!v(this,t)||!v(qt,t)||v(this,Vt)&&this[Vt][t])||e)}function Z(t,e){if(t=k(t),e=m(e,!0),t!==Xt||!v(qt,e)||v(Qt,e)){var n=Ut(t,e);return!n||!v(qt,e)||v(t,Vt)&&t[Vt][e]||(n.enumerable=!0),n}}function V(t){for(var e,n=Wt(k(t)),r=[],o=0;n.length>o;)v(qt,e=n[o++])||e==Vt||e==Mt||r.push(e);return r}function K(t){for(var e,n=t===Xt,r=Wt(n?Qt:k(t)),o=[],i=0;r.length>i;)!v(qt,e=r[i++])||n&&!v(Xt,e)||o.push(qt[e]);return o}var B,J,q,Q=S,X=A,$=0,tt=Math.random(),et=e(function(t){function n(t){e(t,r,{value:{i:"O"+ ++o,w:{}}})}var r=I("meta"),e=R.f,o=0,i=Object.isExtensible||function(){return!0},c=!a(function(){return i(Object.preventExtensions({}))}),u=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!p(t))return"symbol"==(void 0===t?"undefined":s(t))?t:("string"==typeof t?"S":"P")+t;if(!v(t,r)){if(!i(t))return"F";if(!e)return"E";n(t)}return t[r].i},getWeak:function(t,e){if(!v(t,r)){if(!i(t))return!0;if(!e)return!1;n(t)}return t[r].w},onFreeze:function(t){return c&&u.NEED&&i(t)&&!v(t,r)&&n(t),t}}}),nt=(et.KEY,et.NEED,et.fastKey,et.getWeak,et.onFreeze,e(function(t){var e="__core-js_shared__",n=_[e]||(_[e]={});(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:O.version,mode:"pure",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})})),rt=e(function(t){var e=nt("wks"),n=_.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:I)("Symbol."+t))}).store=e}),ot=R.f,it=rt("toStringTag"),ct={f:rt},ut=R.f,at={}.toString,st=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==N(t)?t.split(""):Object(t)},ft=Math.ceil,lt=Math.floor,ht=Math.min,pt=Math.max,dt=Math.min,vt=nt("keys"),yt=(B=!1,function(t,e,n){var r,o=k(t),i=D(o.length),c=function(t,e){return(t=x(t))<0?pt(t+e,0):dt(t,e)}(n,i);if(B&&e!=e){for(;c<i;)if((r=o[c++])!=r)return!0}else for(;c<i;c++)if((B||c in o)&&o[c]===e)return B||c||0;return!B&&-1}),_t=M("IE_PROTO"),Ot="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),bt=Object.keys||function(t){return U(t,Ot)},mt={f:Object.getOwnPropertySymbols},Et={f:{}.propertyIsEnumerable},St=Array.isArray||function(t){return"Array"==N(t)},gt=h?Object.defineProperties:function(t,e){d(t);for(var n,r=bt(e),o=r.length,i=0;i<o;)R.f(t,n=r[i++],e[n]);return t},wt=_.document,Tt=wt&&wt.documentElement,jt=M("IE_PROTO"),Pt="prototype",Rt=function(){var t,e=b("iframe"),n=Ot.length;for(e.style.display="none",Tt.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Rt=t.F;n--;)delete Rt[Pt][Ot[n]];return Rt()},At=Object.create||function(t,e){var n;return null!==t?(W[Pt]=d(t),n=new W,W[Pt]=null,n[jt]=t):n=Rt(),void 0===e?n:gt(n,e)},Ct=Ot.concat("length","prototype"),It={f:Object.getOwnPropertyNames||function(t){return U(t,Ct)}},Lt=It.f,Nt={}.toString,Ft="object"==("undefined"==typeof window?"undefined":s(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],kt={f:function(t){return Ft&&"[object Window]"==Nt.call(t)?function(t){try{return Lt(t)}catch(t){return Ft.slice()}}(t):Lt(k(t))}},xt=Object.getOwnPropertyDescriptor,Dt={f:h?xt:function(t,e){if(t=k(t),e=m(e,!0),j)try{return xt(t,e)}catch(t){}if(v(t,e))return E(!Et.f.call(t,e),t[e])}},Mt=et.KEY,Ut=Dt.f,Gt=R.f,Wt=kt.f,zt=_.Symbol,Ht=_.JSON,Yt=Ht&&Ht.stringify,Zt="prototype",Vt=rt("_hidden"),Kt=rt("toPrimitive"),Bt={}.propertyIsEnumerable,Jt=nt("symbol-registry"),qt=nt("symbols"),Qt=nt("op-symbols"),Xt=Object[Zt],$t="function"==typeof zt&&!!mt.f,te=_.QObject,ee=!te||!te[Zt]||!te[Zt].findChild,ne=h&&a(function(){return 7!=At(Gt({},"a",{get:function(){return Gt(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Ut(Xt,e);r&&delete Xt[e],Gt(t,e,n),r&&t!==Xt&&Gt(Xt,e,r)}:Gt,re=$t&&"symbol"==s(zt.iterator)?function(t){return"symbol"==(void 0===t?"undefined":s(t))}:function(t){return t instanceof zt},oe=function(t,e,n){return t===Xt&&oe(Qt,e,n),d(t),e=m(e,!0),d(n),v(qt,e)?(n.enumerable?(v(t,Vt)&&t[Vt][e]&&(t[Vt][e]=!1),n=At(n,{enumerable:E(0,!1)})):(v(t,Vt)||Gt(t,Vt,E(1,{})),t[Vt][e]=!0),ne(t,e,n)):Gt(t,e,n)};$t||(X((zt=function(t){if(this instanceof zt)throw TypeError("Symbol is not a constructor!");var n=I(0<arguments.length?t:void 0);return h&&ee&&ne(Xt,n,{configurable:!0,set:function t(e){this===Xt&&t.call(Qt,e),v(this,Vt)&&v(this[Vt],n)&&(this[Vt][n]=!1),ne(this,n,E(1,e))}}),z(n)})[Zt],"toString",function(){return this._k}),Dt.f=Z,R.f=oe,It.f=kt.f=V,Et.f=Y,mt.f=K,ct.f=function(t){return z(rt(t))}),Q(Q.G+Q.W+Q.F*!$t,{Symbol:zt});for(var ie="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ce=0;ie.length>ce;)rt(ie[ce++]);for(var ue=bt(rt.store),ae=0;ue.length>ae;)J=ue[ae++],void 0,q=O.Symbol||(O.Symbol={}),"_"==J.charAt(0)||J in q||ut(q,J,{value:ct.f(J)});Q(Q.S+Q.F*!$t,"Symbol",{for:function(t){return v(Jt,t+="")?Jt[t]:Jt[t]=zt(t)},keyFor:function(t){if(!re(t))throw TypeError(t+" is not a symbol!");for(var e in Jt)if(Jt[e]===t)return e},useSetter:function(){ee=!0},useSimple:function(){ee=!1}}),Q(Q.S+Q.F*!$t,"Object",{create:function(t,e){return void 0===e?At(t):H(At(t),e)},defineProperty:oe,defineProperties:H,getOwnPropertyDescriptor:Z,getOwnPropertyNames:V,getOwnPropertySymbols:K});var se=a(function(){mt.f(1)});Q(Q.S+Q.F*se,"Object",{getOwnPropertySymbols:function(t){return mt.f(G(t))}}),Ht&&Q(Q.S+Q.F*(!$t||a(function(){var t=zt();return"[null]"!=Yt([t])||"{}"!=Yt({a:t})||"{}"!=Yt(Object(t))})),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;o<arguments.length;)r.push(arguments[o++]);if(n=e=r[1],(p(e)||void 0!==t)&&!re(t))return St(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!re(e))return e}),r[1]=e,Yt.apply(Ht,r)}}),zt[Zt][Kt]||A(zt[Zt],Kt,zt[Zt].valueOf),L(zt,"Symbol"),L(Math,"Math",!0),L(_.JSON,"JSON",!0),Q(Q.S,"Object",{create:At}),Q(Q.S+Q.F*!h,"Object",{defineProperty:R.f}),Q(Q.S+Q.F*!h,"Object",{defineProperties:gt});function fe(t,e){var n=(O.Object||{})[t]||Object[t],r={};r[t]=e(n),Q(Q.S+Q.F*a(function(){n(1)}),"Object",r)}var le=Dt.f;fe("getOwnPropertyDescriptor",function(){return function(t,e){return le(k(t),e)}});var he=M("IE_PROTO"),pe=Object.prototype,de=Object.getPrototypeOf||function(t){return t=G(t),v(t,he)?t[he]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?pe:null};fe("getPrototypeOf",function(){return function(t){return de(G(t))}}),fe("keys",function(){return function(t){return bt(G(t))}}),fe("getOwnPropertyNames",function(){return kt.f});var ve=et.onFreeze;fe("freeze",function(e){return function(t){return e&&p(t)?e(ve(t)):t}});var ye=et.onFreeze;fe("seal",function(e){return function(t){return e&&p(t)?e(ye(t)):t}});var _e=et.onFreeze;fe("preventExtensions",function(e){return function(t){return e&&p(t)?e(_e(t)):t}}),fe("isFrozen",function(e){return function(t){return!p(t)||!!e&&e(t)}}),fe("isSealed",function(e){return function(t){return!p(t)||!!e&&e(t)}}),fe("isExtensible",function(e){return function(t){return!!p(t)&&(!e||e(t))}});var Oe=Object.assign,be=!Oe||a(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=Oe({},t)[n]||Object.keys(Oe({},e)).join("")!=r})?function(t,e){for(var n=G(t),r=arguments.length,o=1,i=mt.f,c=Et.f;o<r;)for(var u,a=st(arguments[o++]),s=i?bt(a).concat(i(a)):bt(a),f=s.length,l=0;l<f;)u=s[l++],h&&!c.call(a,u)||(n[u]=a[u]);return n}:Oe;Q(Q.S+Q.F,"Object",{assign:be});var me=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};Q(Q.S,"Object",{is:me});function Ee(t,e){if(d(t),!p(e)&&null!==e)throw TypeError(e+": can't set as prototype!")}var Se={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,r){try{(r=y(Function.call,Dt.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,e){return Ee(t,e),n?t.__proto__=e:r(t,e),t}}({},!1):void 0),check:Ee};Q(Q.S,"Object",{setPrototypeOf:Se.set});var ge=_.Reflect,we=ge&&ge.ownKeys||function(t){var e=It.f(d(t)),n=mt.f;return n?e.concat(n(t)):e};Q(Q.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r,o,i,c=k(t),u=Dt.f,a=we(c),s={},f=0;a.length>f;)void 0!==(n=u(c,e=a[f++]))&&(i=n,(o=e)in(r=s)?R.f(r,o,E(0,i)):r[o]=i);return s}});function Te(u){return function(t){for(var e,n=k(t),r=bt(n),o=r.length,i=0,c=[];i<o;)e=r[i++],h&&!je.call(n,e)||c.push(u?[e,n[e]]:n[e]);return c}}var je=Et.f,Pe=Te(!1);Q(Q.S,"Object",{values:function(t){return Pe(t)}});var Re=Te(!0);Q(Q.S,"Object",{entries:function(t){return Re(t)}});h&&Q(Q.P+!0,"Object",{__defineGetter__:function(t,e){R.f(G(this),t,{get:i(e),enumerable:!0,configurable:!0})}}),h&&Q(Q.P+!0,"Object",{__defineSetter__:function(t,e){R.f(G(this),t,{set:i(e),enumerable:!0,configurable:!0})}});var Ae=Dt.f;h&&Q(Q.P+!0,"Object",{__lookupGetter__:function(t){var e,n=G(this),r=m(t,!0);do{if(e=Ae(n,r))return e.get}while(n=de(n))}});var Ce=Dt.f;h&&Q(Q.P+!0,"Object",{__lookupSetter__:function(t){var e,n=G(this),r=m(t,!0);do{if(e=Ce(n,r))return e.set}while(n=de(n))}}),Q(Q.S+Q.F,"Object",{isObject:p});function Ie(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Le))?n:Ne?N(e):"Object"==(r=N(e))&&"function"==typeof e.callee?"Arguments":r}var Le=rt("toStringTag"),Ne="Arguments"==N(function(){return arguments}());Q(Q.S+Q.F,"Object",{classof:Ie});function Fe(t,e){for(var n,r=we(k(e)),o=r.length,i=0;i<o;)R.f(t,n=r[i++],Dt.f(e,n));return t}Q(Q.S+Q.F,"Object",{define:Fe}),Q(Q.S+Q.F,"Object",{make:function(t,e){return Fe(At(t),e)}});var ke=O.Object,xe=ke.values(f),De=(o(Me,[{key:"subscribe",value:function(e){var t=this;return this._subscribers.push(e),function(){t._subscribers=t._subscribers.filter(function(t){return e!=e})}}},{key:"_emit",value:function(t){var e=!0,n=!1,r=void 0;try{for(var o,i=this._subscribers[Symbol.iterator]();!(e=(o=i.next()).done);e=!0)(0,o.value)(t)}catch(t){n=!0,r=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw r}}}},{key:"_pollForChildWindowClosed",value:function(){var t=this;window.setTimeout(function(){t._childWindow&&(t._childWindow.closed?t._windowClosed():t._pollForChildWindowClosed())},1e3)}},{key:"_windowClosed",value:function(){this._childWindow=null,this._initialized=!1,this._emit({type:"closed"})}},{key:"_onMessage",value:function(t){t.type===f.BOOTSTRAP?(this._initialized=!0,this._sendContext()):t.type===f.CLOSED||0<=xe.indexOf(t.type)&&this._emit(t)}},{key:"_sendContext",value:function(){if(!this._initialized||this._childWindow.closed)return this.initialize();this._context,this._childWindow.postMessage({type:"update",data:this._context},"*")}},{key:"setContext",value:function(t){this._content=t,this._sendContext()}},{key:"initialize",value:function(t){var e=0<arguments.length&&void 0!==t?t:{};this._context=e,this._childWindow&&this._childWindow.close(),this._initialized=!1,this._childWindow=window.open("https://app.stitchdata.com/v2/js-client"),this._pollForChildWindowClosed()}},{key:"close",value:function(){this._childWindow&&this._childWindow.close()}}]),Me);function Me(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,Me),this._childWindow=null,this._initialized=!1,this._context=t,this._subscribers=[],window.addEventListener("message",function(t){t.source===e._childWindow&&e._onMessage(t.data)})}var Ue={},Ge={};A(Ge,rt("iterator"),function(){return this});function We(){return this}function ze(t,e,n,r,o,i,c){function u(t){if(!Ze&&t in d)return d[t];switch(t){case"keys":case Ve:return function(){return new n(this,t)}}return function(){return new n(this,t)}}!function(t,e,n){t.prototype=At(Ge,{next:E(1,n)}),L(t,e+" Iterator")}(n,e,r);var a,s,f,l=e+" Iterator",h=o==Ve,p=!1,d=t.prototype,v=d[Ye]||d["@@iterator"]||o&&d[o],y=v||u(o),_=o?h?u("entries"):y:void 0,O="Array"==e&&d.entries||v;if(O&&(f=de(O.call(new t)))!==Object.prototype&&f.next&&L(f,l,!0),h&&v&&v.name!==Ve&&(p=!0,y=function(){return v.call(this)}),c&&(Ze||p||!d[Ye])&&A(d,Ye,y),Ue[e]=y,Ue[l]=We,o)if(a={values:h?y:u(Ve),keys:i?y:u("keys"),entries:_},c)for(s in a)s in d||X(d,s,a[s]);else Q(Q.P+Q.F*(Ze||p),e,a);return a}var He,Ye=rt("iterator"),Ze=!([].keys&&"next"in[].keys()),Ve="values",Ke=(He=!0,function(t,e){var n,r,o=String(F(t)),i=x(e),c=o.length;return i<0||c<=i?He?"":void 0:(n=o.charCodeAt(i))<55296||56319<n||i+1===c||(r=o.charCodeAt(i+1))<56320||57343<r?He?o.charAt(i):n:He?o.slice(i,i+2):r-56320+(n-55296<<10)+65536});ze(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Ke(e,n),this._i+=t.length,{value:t,done:!1})});function Be(t,e){return{value:e,done:!!t}}ze(Array,"Array",function(t,e){this._t=k(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,Be(1)):Be(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values");Ue.Arguments=Ue.Array;for(var Je=rt("toStringTag"),qe="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),Qe=0;Qe<qe.length;Qe++){var Xe=qe[Qe],$e=_[Xe],tn=$e&&$e.prototype;tn&&!tn[Je]&&A(tn,Je,Xe),Ue[Xe]=Ue.Array}function en(e,t,n,r){try{return r?t(d(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&d(o.call(e)),t}}function nn(t,e){var n,r=d(t).constructor;return void 0===r||null==(n=d(r)[dn])?e:i(n)}function rn(){var t=+this;if(En.hasOwnProperty(t)){var e=En[t];delete En[t],e()}}function on(t){rn.call(t.data)}var cn,un,an,sn=rt("iterator"),fn=Array.prototype,ln=rt("iterator"),hn=O.getIteratorMethod=function(t){if(null!=t)return t[ln]||t["@@iterator"]||Ue[Ie(t)]},pn=e(function(t){var h={},p={},e=t.exports=function(t,e,n,r,o){var i,c,u,a,s=o?function(){return t}:hn(t),f=y(n,r,e?2:1),l=0;if("function"!=typeof s)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(Ue.Array===t||fn[sn]===t)}(s)){for(i=D(t.length);l<i;l++)if((a=e?f(d(c=t[l])[0],c[1]):f(t[l]))===h||a===p)return a}else for(u=s.call(t);!(c=u.next()).done;)if((a=en(u,f,c.value,e))===h||a===p)return a};e.BREAK=h,e.RETURN=p}),dn=rt("species"),vn=_.process,yn=_.setImmediate,_n=_.clearImmediate,On=_.MessageChannel,bn=_.Dispatch,mn=0,En={},Sn="onreadystatechange";yn&&_n||(yn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return En[++mn]=function(){!function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}t.apply(n,e)}("function"==typeof t?t:Function(t),e)},cn(mn),mn},_n=function(t){delete En[t]},"process"==N(vn)?cn=function(t){vn.nextTick(y(rn,t,1))}:bn&&bn.now?cn=function(t){bn.now(y(rn,t,1))}:On?(an=(un=new On).port2,un.port1.onmessage=on,cn=y(an.postMessage,an,1)):_.addEventListener&&"function"==typeof postMessage&&!_.importScripts?(cn=function(t){_.postMessage(t+"","*")},_.addEventListener("message",on,!1)):cn=Sn in b("script")?function(t){Tt.appendChild(b("script"))[Sn]=function(){Tt.removeChild(this),rn.call(t)}}:function(t){setTimeout(y(rn,t,1),0)});var gn={set:yn,clear:_n},wn=gn.set,Tn=_.MutationObserver||_.WebKitMutationObserver,jn=_.process,Pn=_.Promise,Rn="process"==N(jn);function An(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=i(n),this.reject=i(r)}function Cn(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}function In(t,e){if(d(t),p(e)&&e.constructor===t)return e;var n=Ln.f(t);return(0,n.resolve)(e),n.promise}var Ln={f:function(t){return new An(t)}},Nn=_.navigator,Fn=Nn&&Nn.userAgent||"",kn=rt("species"),xn=rt("iterator"),Dn=!1;try{[7][xn]().return=function(){Dn=!0}}catch(t){}function Mn(){}function Un(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e}function Gn(f,n){if(!f._n){f._n=!0;var r=f._c;qn(function(){for(var a=f._v,s=1==f._s,t=0,e=function(t){var e,n,r,o=s?t.ok:t.fail,i=t.resolve,c=t.reject,u=t.domain;try{o?(s||(2==f._h&&ar(f),f._h=1),!0===o?e=a:(u&&u.enter(),e=o(a),u&&(u.exit(),r=!0)),e===t.promise?c(Xn("Promise-chain cycle")):(n=Un(e))?n.call(e,i,c):i(e)):c(a)}catch(t){u&&!r&&u.exit(),c(t)}};r.length>t;)e(r[t++]);f._c=[],f._n=!1,n&&!f._h&&cr(f)})}}function Wn(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),Gn(e,!0))}function zn(t){var n,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw Xn("Promise can't be resolved itself");(n=Un(t))?qn(function(){var e={_w:r,_d:!1};try{n.call(t,y(zn,e,1),y(Wn,e,1))}catch(t){Wn.call(e,t)}}):(r._v=t,r._s=1,Gn(r,!1))}catch(t){Wn.call({_w:r,_d:!1},t)}}}var Hn,Yn,Zn,Vn,Kn,Bn,Jn=gn.set,qn=function(){function t(){var t,e;for(Rn&&(t=jn.domain)&&t.exit();n;){e=n.fn,n=n.next;try{e()}catch(t){throw n?o():r=void 0,t}}r=void 0,t&&t.enter()}var n,r,o;if(Rn)o=function(){jn.nextTick(t)};else if(!Tn||_.navigator&&_.navigator.standalone)if(Pn&&Pn.resolve){var e=Pn.resolve(void 0);o=function(){e.then(t)}}else o=function(){wn.call(_,t)};else{var i=!0,c=document.createTextNode("");new Tn(t).observe(c,{characterData:!0}),o=function(){c.data=i=!i}}return function(t){var e={fn:t,next:void 0};r&&(r.next=e),n||(n=e,o()),r=e}}(),Qn="Promise",Xn=_.TypeError,$n=_.process,tr=$n&&$n.versions,er=tr&&tr.v8||"",nr=_[Qn],rr="process"==Ie($n),or=Yn=Ln.f,ir=!!function(){try{var t=nr.resolve(1),e=(t.constructor={})[rt("species")]=function(t){t(Mn,Mn)};return(rr||"function"==typeof PromiseRejectionEvent)&&t.then(Mn)instanceof e&&0!==er.indexOf("6.6")&&-1===Fn.indexOf("Chrome/66")}catch(t){}}(),cr=function(i){Jn.call(_,function(){var t,e,n,r=i._v,o=ur(i);if(o&&(t=Cn(function(){rr?$n.emit("unhandledRejection",r,i):(e=_.onunhandledrejection)?e({promise:i,reason:r}):(n=_.console)&&n.error&&n.error("Unhandled promise rejection",r)}),i._h=rr||ur(i)?2:1),i._a=void 0,o&&t.e)throw t.v})},ur=function(t){return 1!==t._h&&0===(t._a||t._c).length},ar=function(e){Jn.call(_,function(){var t;rr?$n.emit("rejectionHandled",e):(t=_.onrejectionhandled)&&t({promise:e,reason:e._v})})};ir||(nr=function(t){!function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!")}(this,nr,Qn,"_h"),i(t),Hn.call(this);try{t(y(zn,this,1),y(Wn,this,1))}catch(t){Wn.call(this,t)}},(Hn=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:A(t,r,e[r]);return t}(nr.prototype,{then:function(t,e){var n=or(nn(this,nr));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=rr?$n.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&Gn(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),Zn=function(){var t=new Hn;this.promise=t,this.resolve=y(zn,t,1),this.reject=y(Wn,t,1)},Ln.f=or=function(t){return t===nr||t===Vn?new Zn(t):Yn(t)}),Q(Q.G+Q.W+Q.F*!ir,{Promise:nr}),L(nr,Qn),Bn="function"==typeof O[Kn=Qn]?O[Kn]:_[Kn],h&&Bn&&!Bn[kn]&&R.f(Bn,kn,{configurable:!0,get:function(){return this}}),Vn=O[Qn],Q(Q.S+Q.F*!ir,Qn,{reject:function(t){var e=or(this);return(0,e.reject)(t),e.promise}}),Q(Q.S+!0*Q.F,Qn,{resolve:function(t){return In(this===Vn?nr:this,t)}}),Q(Q.S+Q.F*!(ir&&function(t,e){if(!e&&!Dn)return!1;var n=!1;try{var r=[7],o=r[xn]();o.next=function(){return{done:n=!0}},r[xn]=function(){return o},t(r)}catch(t){}return n}(function(t){nr.all(t).catch(Mn)})),Qn,{all:function(t){var c=this,e=or(c),u=e.resolve,a=e.reject,n=Cn(function(){var r=[],o=0,i=1;pn(t,!1,function(t){var e=o++,n=!1;r.push(void 0),i++,c.resolve(t).then(function(t){n||(n=!0,r[e]=t,--i||u(r))},a)}),--i||u(r)});return n.e&&a(n.v),e.promise},race:function(t){var e=this,n=or(e),r=n.reject,o=Cn(function(){pn(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return o.e&&r(o.v),n.promise}}),Q(Q.P+Q.R,"Promise",{finally:function(e){var n=nn(this,O.Promise||_.Promise),t="function"==typeof e;return this.then(t?function(t){return In(n,e()).then(function(){return t})}:e,t?function(t){return In(n,e()).then(function(){throw t})}:e)}}),Q(Q.S,"Promise",{try:function(t){var e=Ln.f(this),n=Cn(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}});var sr=O.Promise,fr={CREATE:"CREATE",EDIT:"EDIT",AUTHORIZE:"AUTHORIZE",ONLY_AUTHORIZE:"ONLY_AUTHORIZE",DISCOVER:"DISCOVER",SELECT_STREAMS:"SELECT_STREAMS"};function lr(t,e){if(!e.type)throw new Error("You must specify `options.type`");return ke.assign(t,{targetState:{name:"app.connections.create",params:{route:e.type}}})}function hr(t,e){return pr(e),ke.assign(t,{targetState:{name:"app.connections.details.edit",params:{id:e.id}}})}function pr(t){if(!t.id)throw new Error("You must specify `options.id`")}function dr(t,e){return pr(e),ke.assign(t,{targetState:{name:"app.connections.details.authorize",params:{id:e.id}}})}function vr(t,e){if(pr(e),!e.discovery_job_name)throw new Error("You must specify `options.discovery_job_name`");return ke.assign(t,{targetState:{name:"app.connections.details.check",params:{id:e.id,check_job_name:e.discovery_job_name}}})}function yr(t,e){return pr(e),ke.assign(t,{targetState:{name:"app.connections.details.fields",params:{id:e.id}}})}var _r,Or=(_r=Error,u(br,_r),br);function br(t){n(this,br);var e=l(this,(br.__proto__||ke.getPrototypeOf(br)).call(this,"Integration with id "+t+" not found."));return e.constructor=br,e}var mr,Er=(mr=Error,u(Sr,mr),Sr);function Sr(t){n(this,Sr);var e=l(this,(Sr.__proto__||ke.getPrototypeOf(Sr)).call(this,'Unknown source type: "'+t+'".'));return e.constructor=Sr,e}var gr,wr=(gr=Error,u(Tr,gr),Tr);function Tr(){n(this,Tr);var t=l(this,(Tr.__proto__||ke.getPrototypeOf(Tr)).call(this,"App closed before reaching end of flow."));return t.constructor=Tr,t}var jr,Pr=(jr=Error,u(Rr,jr),Rr);function Rr(){n(this,Rr);var t=l(this,(Rr.__proto__||ke.getPrototypeOf(Rr)).call(this,"Error upgrading ephemeral token."));return t.constructor=Rr,t}var Ar,Cr=(Ar=Error,u(Ir,Ar),Ir);function Ir(){n(this,Ir);var t=l(this,(Ir.__proto__||ke.getPrototypeOf(Ir)).call(this,"Error authorizing connection."));return t.constructor=Ir,t}function Lr(u,t){t.id;var a=t.type,s=function(t,e,n){var r,o=(g(r={},fr.CREATE,lr),g(r,fr.EDIT,hr),g(r,fr.AUTHORIZE,dr),g(r,fr.ONLY_AUTHORIZE,dr),g(r,fr.DISCOVER,vr),g(r,fr.SELECT_STREAMS,yr),r)[e];return o?o(t,n):t}({version:2,hideNav:!0,preventIntegrationFormClose:!0,additionalState:{default_selections:t.default_streams,ephemeral_token:t.ephemeral_token}},u,t);return new sr(function(e,n){var r=new De,o="IN_PROGRESS",i=void 0,c=void 0;r.subscribe(function(t){switch(t.type){case f.CLOSED:"FAILED"===o?n(c):"SUCCESS"===o?e(i):n(new wr);break;case f.INTEGRATION_FORM_CLOSE:o="FAILED",c=new wr,r.close();break;case f.ERROR_LOADING_CONNECTION:o="FAILED",c=new Or(t.data.id),r.close();break;case f.ERROR_LOADING_INTEGRATION_TYPE:o="FAILED",c=new Er(a),r.close();break;case f.ERROR_UPGRADING_EPHEMERAL_TOKEN:o="FAILED",c=new Pr,r.close();break;case f.AUTHORIZE_FAILURE:o="FAILED",c=new Cr,r.close();break;case f.AUTHORIZE_SUCCESS:u===fr.ONLY_AUTHORIZE&&(o="SUCCESS",i=t.data,r.close());break;case f.INTEGRATION_FLOW_COMPLETED:o="SUCCESS",i=t.data,r.close()}}),r.initialize(s)})}t.STEPS=fr,t.SourceNotFoundError=Or,t.UnknownSourceTypeError=Er,t.AppClosedPrematurelyError=wr,t.UpgradeEphemeralTokenError=Pr,t.AuthorizeFailureError=Cr,t.addSource=function(t){return Lr(fr.CREATE,t)},t.editSource=function(t){return Lr(fr.EDIT,t)},t.authorizeSource=function(t){return Lr(fr.AUTHORIZE,t)},t.onlyAuthorizeSource=function(t){return Lr(fr.ONLY_AUTHORIZE,t)},t.displayDiscoveryOutputForSource=function(t){return Lr(fr.DISCOVER,t)},t.selectStreamsForSource=function(t){return Lr(fr.SELECT_STREAMS,t)},Object.defineProperty(t,"__esModule",{value:!0})});
