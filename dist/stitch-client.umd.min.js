!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.Stitch={})}(this,function(t){"use strict";function n(t,n){return n={exports:{}},t(n,n.exports),n.exports}function e(t,n){if(!n.type)throw new Error("You must specify `options.type`");return Un.assign(t,{targetState:{name:"app.connections.create",params:{route:n.type}}})}function r(t,n){return o(n),Un.assign(t,{targetState:{name:"app.connections.details.edit",params:{id:n.id}}})}function o(t){if(!t.id)throw new Error("You must specify `options.id`")}function i(t,n){return o(n),Un.assign(t,{targetState:{name:"app.connections.details.authorize",params:{id:n.id}}})}function c(t,n){if(o(n),!n.discovery_job_name)throw new Error("You must specify `options.discovery_job_name`");return Un.assign(t,{targetState:{name:"app.connections.details.check",params:{id:n.id,check_job_name:n.discovery_job_name}}})}function u(t,n){return o(n),Un.assign(t,{targetState:{name:"app.connections.details.fields",params:{id:n.id}}})}function a(t,n){var o=n.id,a=n.type,s=function(t,n,o){var a,f=(a={},g(a,ar.CREATE,e),g(a,ar.EDIT,r),g(a,ar.AUTHORIZE,i),g(a,ar.DISCOVER,c),g(a,ar.SELECT_STREAMS,u),a)[n];return f?f(t,o):t}({version:2,hideNav:!0,preventIntegrationFormClose:!0,additionalState:{default_selections:n.default_streams,ephemeral_token:n.ephemeral_token}},t,n);return new ur(function(t,n){var e=new Kn,r=void 0;e.subscribe(function(i){i.type===f.ERROR_LOADING_CONNECTION&&i.data.id===o?(n(new fr(o)),e.close()):i.type===f.ERROR_LOADING_INTEGRATION_TYPE&&a&&i.data.type===a?(n(new sr(a)),e.close()):i.type===f.ERROR_UPGRADING_EPHEMERAL_TOKEN?(n(new pr),e.close()):i.type===f.CLOSED||i.type===f.INTEGRATION_FORM_CLOSE?(r?t(r):n(new lr),e.close()):i.type===f.INTEGRATION_FLOW_COMPLETED&&(a&&i.data.type===a||o&&i.data.id===o)&&(r=i.data)}),e.initialize(s)})}var f=Object.freeze({BOOTSTRAP:"bootstrap",CLOSED:"closed",CONNECTION_CREATED:"connectionCreated",CONNECTION_UPDATED:"connectionUpdated",ERROR_AUTHORIZING_CONNCTION:"errorAuthorizingConnection",ERROR_LOADING_CONNECTION:"errorLoadingConnection",ERROR_LOADING_INTEGRATION_TYPE:"errorLoadingIntegrationType",ERROR_UPGRADING_EPHEMERAL_TOKEN:"errorUpgradingEphemeralToken",INTEGRATION_FLOW_COMPLETED:"integrationFlowCompleted",INTEGRATION_FORM_CLOSE:"integrationFormClose"}),s=n(function(t){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)}),l={}.hasOwnProperty,p=function(t,n){return l.call(t,n)},h=function(t){try{return!!t()}catch(t){return!0}},d=!h(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),v=n(function(t){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)}),y=(v.version,function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}),_=function(t,n,e){if(y(t),void 0===n)return t;switch(e){case 1:return function(e){return t.call(n,e)};case 2:return function(e,r){return t.call(n,e,r)};case 3:return function(e,r,o){return t.call(n,e,r,o)}}return function(){return t.apply(n,arguments)}},b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O=function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")},m=function(){function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}}(),g=function(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t},E=function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)},S=function(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n},w=function(t){return"object"===(void 0===t?"undefined":b(t))?null!==t:"function"==typeof t},T=function(t){if(!w(t))throw TypeError(t+" is not an object!");return t},j=s.document,P=w(j)&&w(j.createElement),R=function(t){return P?j.createElement(t):{}},C=!d&&!h(function(){return 7!=Object.defineProperty(R("div"),"a",{get:function(){return 7}}).a}),N=function(t,n){if(!w(t))return t;var e,r;if(n&&"function"==typeof(e=t.toString)&&!w(r=e.call(t)))return r;if("function"==typeof(e=t.valueOf)&&!w(r=e.call(t)))return r;if(!n&&"function"==typeof(e=t.toString)&&!w(r=e.call(t)))return r;throw TypeError("Can't convert object to primitive value")},A=Object.defineProperty,I={f:d?Object.defineProperty:function(t,n,e){if(T(t),n=N(n,!0),T(e),C)try{return A(t,n,e)}catch(t){}if("get"in e||"set"in e)throw TypeError("Accessors not supported!");return"value"in e&&(t[n]=e.value),t}},L=function(t,n){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:n}},k=d?function(t,n,e){return I.f(t,n,L(1,e))}:function(t,n,e){return t[n]=e,t},F="prototype",x=function t(n,e,r){var o,i,c,u=n&t.F,a=n&t.G,f=n&t.S,l=n&t.P,p=n&t.B,h=n&t.W,d=a?v:v[e]||(v[e]={}),y=d[F],b=a?s:f?s[e]:(s[e]||{})[F];a&&(r=e);for(o in r)(i=!u&&b&&void 0!==b[o])&&o in d||(c=i?b[o]:r[o],d[o]=a&&"function"!=typeof b[o]?r[o]:p&&i?_(c,s):h&&b[o]==c?function(t){var n=function(n,e,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(n);case 2:return new t(n,e)}return new t(n,e,r)}return t.apply(this,arguments)};return n[F]=t[F],n}(c):l&&"function"==typeof c?_(Function.call,c):c,l&&((d.virtual||(d.virtual={}))[o]=c,n&t.R&&y&&!y[o]&&k(y,o,c)))};x.F=1,x.G=2,x.S=4,x.P=8,x.B=16,x.W=32,x.U=64,x.R=128;var M=x,D=k,G=0,W=Math.random(),z=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++G+W).toString(36))},U=n(function(t){var n=z("meta"),e=I.f,r=0,o=Object.isExtensible||function(){return!0},i=!h(function(){return o(Object.preventExtensions({}))}),c=function(t){e(t,n,{value:{i:"O"+ ++r,w:{}}})},u=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!w(t))return"symbol"==(void 0===t?"undefined":b(t))?t:("string"==typeof t?"S":"P")+t;if(!p(t,n)){if(!o(t))return"F";if(!e)return"E";c(t)}return t[n].i},getWeak:function(t,e){if(!p(t,n)){if(!o(t))return!0;if(!e)return!1;c(t)}return t[n].w},onFreeze:function(t){return i&&u.NEED&&o(t)&&!p(t,n)&&c(t),t}}}),H=(U.KEY,U.NEED,U.fastKey,U.getWeak,U.onFreeze,"__core-js_shared__"),V=s[H]||(s[H]={}),K=function(t){return V[t]||(V[t]={})},Y=n(function(t){var n=K("wks"),e=s.Symbol,r="function"==typeof e;(t.exports=function(t){return n[t]||(n[t]=r&&e[t]||(r?e:z)("Symbol."+t))}).store=n}),B=I.f,Z=Y("toStringTag"),J=function(t,n,e){t&&!p(t=e?t:t.prototype,Z)&&B(t,Z,{configurable:!0,value:n})},q={f:Y},Q=I.f,X=function(t){var n=v.Symbol||(v.Symbol={});"_"==t.charAt(0)||t in n||Q(n,t,{value:q.f(t)})},$={}.toString,tt=function(t){return $.call(t).slice(8,-1)},nt=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==tt(t)?t.split(""):Object(t)},et=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t},rt=function(t){return nt(et(t))},ot=Math.ceil,it=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?it:ot)(t)},ut=Math.min,at=function(t){return t>0?ut(ct(t),9007199254740991):0},ft=Math.max,st=Math.min,lt=K("keys"),pt=function(t){return lt[t]||(lt[t]=z(t))},ht=function(t){return function(n,e,r){var o,i=rt(n),c=at(i.length),u=function(t,n){return(t=ct(t))<0?ft(t+n,0):st(t,n)}(r,c);if(t&&e!=e){for(;c>u;)if((o=i[u++])!=o)return!0}else for(;c>u;u++)if((t||u in i)&&i[u]===e)return t||u||0;return!t&&-1}}(!1),dt=pt("IE_PROTO"),vt=function(t,n){var e,r=rt(t),o=0,i=[];for(e in r)e!=dt&&p(r,e)&&i.push(e);for(;n.length>o;)p(r,e=n[o++])&&(~ht(i,e)||i.push(e));return i},yt="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),_t=Object.keys||function(t){return vt(t,yt)},bt={f:Object.getOwnPropertySymbols},Ot={f:{}.propertyIsEnumerable},mt=Array.isArray||function(t){return"Array"==tt(t)},gt=d?Object.defineProperties:function(t,n){T(t);for(var e,r=_t(n),o=r.length,i=0;o>i;)I.f(t,e=r[i++],n[e]);return t},Et=s.document,St=Et&&Et.documentElement,wt=pt("IE_PROTO"),Tt=function(){},jt="prototype",Pt=function(){var t,n=R("iframe"),e=yt.length;for(n.style.display="none",St.appendChild(n),n.src="javascript:",(t=n.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Pt=t.F;e--;)delete Pt[jt][yt[e]];return Pt()},Rt=Object.create||function(t,n){var e;return null!==t?(Tt[jt]=T(t),e=new Tt,Tt[jt]=null,e[wt]=t):e=Pt(),void 0===n?e:gt(e,n)},Ct=yt.concat("length","prototype"),Nt={f:Object.getOwnPropertyNames||function(t){return vt(t,Ct)}},At=Nt.f,It={}.toString,Lt="object"==("undefined"==typeof window?"undefined":b(window))&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],kt={f:function(t){return Lt&&"[object Window]"==It.call(t)?function(t){try{return At(t)}catch(t){return Lt.slice()}}(t):At(rt(t))}},Ft=Object.getOwnPropertyDescriptor,xt={f:d?Ft:function(t,n){if(t=rt(t),n=N(n,!0),C)try{return Ft(t,n)}catch(t){}if(p(t,n))return L(!Ot.f.call(t,n),t[n])}},Mt=U.KEY,Dt=xt.f,Gt=I.f,Wt=kt.f,zt=s.Symbol,Ut=s.JSON,Ht=Ut&&Ut.stringify,Vt="prototype",Kt=Y("_hidden"),Yt=Y("toPrimitive"),Bt={}.propertyIsEnumerable,Zt=K("symbol-registry"),Jt=K("symbols"),qt=K("op-symbols"),Qt=Object[Vt],Xt="function"==typeof zt,$t=s.QObject,tn=!$t||!$t[Vt]||!$t[Vt].findChild,nn=d&&h(function(){return 7!=Rt(Gt({},"a",{get:function(){return Gt(this,"a",{value:7}).a}})).a})?function(t,n,e){var r=Dt(Qt,n);r&&delete Qt[n],Gt(t,n,e),r&&t!==Qt&&Gt(Qt,n,r)}:Gt,en=function(t){var n=Jt[t]=Rt(zt[Vt]);return n._k=t,n},rn=Xt&&"symbol"==b(zt.iterator)?function(t){return"symbol"==(void 0===t?"undefined":b(t))}:function(t){return t instanceof zt},on=function(t,n,e){return t===Qt&&on(qt,n,e),T(t),n=N(n,!0),T(e),p(Jt,n)?(e.enumerable?(p(t,Kt)&&t[Kt][n]&&(t[Kt][n]=!1),e=Rt(e,{enumerable:L(0,!1)})):(p(t,Kt)||Gt(t,Kt,L(1,{})),t[Kt][n]=!0),nn(t,n,e)):Gt(t,n,e)},cn=function(t,n){T(t);for(var e,r=function(t){var n=_t(t),e=bt.f;if(e)for(var r,o=e(t),i=Ot.f,c=0;o.length>c;)i.call(t,r=o[c++])&&n.push(r);return n}(n=rt(n)),o=0,i=r.length;i>o;)on(t,e=r[o++],n[e]);return t},un=function(t){var n=Bt.call(this,t=N(t,!0));return!(this===Qt&&p(Jt,t)&&!p(qt,t))&&(!(n||!p(this,t)||!p(Jt,t)||p(this,Kt)&&this[Kt][t])||n)},an=function(t,n){if(t=rt(t),n=N(n,!0),t!==Qt||!p(Jt,n)||p(qt,n)){var e=Dt(t,n);return!e||!p(Jt,n)||p(t,Kt)&&t[Kt][n]||(e.enumerable=!0),e}},fn=function(t){for(var n,e=Wt(rt(t)),r=[],o=0;e.length>o;)p(Jt,n=e[o++])||n==Kt||n==Mt||r.push(n);return r},sn=function(t){for(var n,e=t===Qt,r=Wt(e?qt:rt(t)),o=[],i=0;r.length>i;)!p(Jt,n=r[i++])||e&&!p(Qt,n)||o.push(Jt[n]);return o};Xt||(D((zt=function(){if(this instanceof zt)throw TypeError("Symbol is not a constructor!");var t=z(arguments.length>0?arguments[0]:void 0);return d&&tn&&nn(Qt,t,{configurable:!0,set:function n(e){this===Qt&&n.call(qt,e),p(this,Kt)&&p(this[Kt],t)&&(this[Kt][t]=!1),nn(this,t,L(1,e))}}),en(t)})[Vt],"toString",function(){return this._k}),xt.f=an,I.f=on,Nt.f=kt.f=fn,Ot.f=un,bt.f=sn,q.f=function(t){return en(Y(t))}),M(M.G+M.W+M.F*!Xt,{Symbol:zt});for(var ln="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),pn=0;ln.length>pn;)Y(ln[pn++]);for(var hn=_t(Y.store),dn=0;hn.length>dn;)X(hn[dn++]);M(M.S+M.F*!Xt,"Symbol",{for:function(t){return p(Zt,t+="")?Zt[t]:Zt[t]=zt(t)},keyFor:function(t){if(!rn(t))throw TypeError(t+" is not a symbol!");for(var n in Zt)if(Zt[n]===t)return n},useSetter:function(){tn=!0},useSimple:function(){tn=!1}}),M(M.S+M.F*!Xt,"Object",{create:function(t,n){return void 0===n?Rt(t):cn(Rt(t),n)},defineProperty:on,defineProperties:cn,getOwnPropertyDescriptor:an,getOwnPropertyNames:fn,getOwnPropertySymbols:sn}),Ut&&M(M.S+M.F*(!Xt||h(function(){var t=zt();return"[null]"!=Ht([t])||"{}"!=Ht({a:t})||"{}"!=Ht(Object(t))})),"JSON",{stringify:function(t){for(var n,e,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(e=n=r[1],(w(n)||void 0!==t)&&!rn(t))return mt(n)||(n=function(t,n){if("function"==typeof e&&(n=e.call(this,t,n)),!rn(n))return n}),r[1]=n,Ht.apply(Ut,r)}}),zt[Vt][Yt]||k(zt[Vt],Yt,zt[Vt].valueOf),J(zt,"Symbol"),J(Math,"Math",!0),J(s.JSON,"JSON",!0),M(M.S,"Object",{create:Rt}),M(M.S+M.F*!d,"Object",{defineProperty:I.f}),M(M.S+M.F*!d,"Object",{defineProperties:gt});var vn=function(t,n){var e=(v.Object||{})[t]||Object[t],r={};r[t]=n(e),M(M.S+M.F*h(function(){e(1)}),"Object",r)},yn=xt.f;vn("getOwnPropertyDescriptor",function(){return function(t,n){return yn(rt(t),n)}});var _n=function(t){return Object(et(t))},bn=pt("IE_PROTO"),On=Object.prototype,mn=Object.getPrototypeOf||function(t){return t=_n(t),p(t,bn)?t[bn]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?On:null};vn("getPrototypeOf",function(){return function(t){return mn(_n(t))}}),vn("keys",function(){return function(t){return _t(_n(t))}}),vn("getOwnPropertyNames",function(){return kt.f});var gn=U.onFreeze;vn("freeze",function(t){return function(n){return t&&w(n)?t(gn(n)):n}});var En=U.onFreeze;vn("seal",function(t){return function(n){return t&&w(n)?t(En(n)):n}});var Sn=U.onFreeze;vn("preventExtensions",function(t){return function(n){return t&&w(n)?t(Sn(n)):n}}),vn("isFrozen",function(t){return function(n){return!w(n)||!!t&&t(n)}}),vn("isSealed",function(t){return function(n){return!w(n)||!!t&&t(n)}}),vn("isExtensible",function(t){return function(n){return!!w(n)&&(!t||t(n))}});var wn=Object.assign,Tn=!wn||h(function(){var t={},n={},e=Symbol(),r="abcdefghijklmnopqrst";return t[e]=7,r.split("").forEach(function(t){n[t]=t}),7!=wn({},t)[e]||Object.keys(wn({},n)).join("")!=r})?function(t,n){for(var e=_n(t),r=arguments.length,o=1,i=bt.f,c=Ot.f;r>o;)for(var u,a=nt(arguments[o++]),f=i?_t(a).concat(i(a)):_t(a),s=f.length,l=0;s>l;)c.call(a,u=f[l++])&&(e[u]=a[u]);return e}:wn;M(M.S+M.F,"Object",{assign:Tn});var jn=Object.is||function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};M(M.S,"Object",{is:jn});var Pn=function(t,n){if(T(t),!w(n)&&null!==n)throw TypeError(n+": can't set as prototype!")},Rn={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n,e){try{(e=_(Function.call,xt.f(Object.prototype,"__proto__").set,2))(t,[]),n=!(t instanceof Array)}catch(t){n=!0}return function(t,r){return Pn(t,r),n?t.__proto__=r:e(t,r),t}}({},!1):void 0),check:Pn};M(M.S,"Object",{setPrototypeOf:Rn.set});var Cn=s.Reflect,Nn=Cn&&Cn.ownKeys||function(t){var n=Nt.f(T(t)),e=bt.f;return e?n.concat(e(t)):n},An=function(t,n,e){n in t?I.f(t,n,L(0,e)):t[n]=e};M(M.S,"Object",{getOwnPropertyDescriptors:function(t){for(var n,e,r=rt(t),o=xt.f,i=Nn(r),c={},u=0;i.length>u;)void 0!==(e=o(r,n=i[u++]))&&An(c,n,e);return c}});var In=Ot.f,Ln=function(t){return function(n){for(var e,r=rt(n),o=_t(r),i=o.length,c=0,u=[];i>c;)In.call(r,e=o[c++])&&u.push(t?[e,r[e]]:r[e]);return u}},kn=Ln(!1);M(M.S,"Object",{values:function(t){return kn(t)}});var Fn=Ln(!0);M(M.S,"Object",{entries:function(t){return Fn(t)}});d&&M(M.P+!0,"Object",{__defineGetter__:function(t,n){I.f(_n(this),t,{get:y(n),enumerable:!0,configurable:!0})}}),d&&M(M.P+!0,"Object",{__defineSetter__:function(t,n){I.f(_n(this),t,{set:y(n),enumerable:!0,configurable:!0})}});var xn=xt.f;d&&M(M.P+!0,"Object",{__lookupGetter__:function(t){var n,e=_n(this),r=N(t,!0);do{if(n=xn(e,r))return n.get}while(e=mn(e))}});var Mn=xt.f;d&&M(M.P+!0,"Object",{__lookupSetter__:function(t){var n,e=_n(this),r=N(t,!0);do{if(n=Mn(e,r))return n.set}while(e=mn(e))}}),M(M.S+M.F,"Object",{isObject:w});var Dn=Y("toStringTag"),Gn="Arguments"==tt(function(){return arguments}()),Wn=function(t){var n,e,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(e=function(t,n){try{return t[n]}catch(t){}}(n=Object(t),Dn))?e:Gn?tt(n):"Object"==(r=tt(n))&&"function"==typeof n.callee?"Arguments":r};M(M.S+M.F,"Object",{classof:Wn});var zn=function(t,n){for(var e,r=Nn(rt(n)),o=r.length,i=0;o>i;)I.f(t,e=r[i++],xt.f(n,e));return t};M(M.S+M.F,"Object",{define:zn}),M(M.S+M.F,"Object",{make:function(t,n){return zn(Rt(t),n)}});var Un=v.Object,Hn=function(){},Vn=Un.values(f),Kn=function(){function t(){var n=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};O(this,t),this._childWindow=null,this._initialized=!1,this._context=e,this._subscribers=[],window.addEventListener("message",function(t){t.source===n._childWindow&&n._onMessage(t.data)})}return m(t,[{key:"subscribe",value:function(t){var n=this;return this._subscribers.push(t),function(){n._subscribers=n._subscribers.filter(function(n){return t!=t})}}},{key:"_emit",value:function(t){var n=!0,e=!1,r=void 0;try{for(var o,i=this._subscribers[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){(0,o.value)(t)}}catch(t){e=!0,r=t}finally{try{!n&&i.return&&i.return()}finally{if(e)throw r}}}},{key:"_pollForChildWindowClosed",value:function(){var t=this;window.setTimeout(function(){t._childWindow&&(t._childWindow.closed?t._windowClosed():t._pollForChildWindowClosed())},1e3)}},{key:"_windowClosed",value:function(){Hn("event: closed"),this._childWindow=null,this._initialized=!1,this._emit({type:"closed"})}},{key:"_onMessage",value:function(t){t.type===f.BOOTSTRAP?(Hn("event: initialized"),this._initialized=!0,this._sendContext()):t.type===f.CLOSED||(Vn.indexOf(t.type)>=0?(Hn("event",t),this._emit(t)):Hn("event: [WARNING] unknown message type",t))}},{key:"_sendContext",value:function(){if(!this._initialized||this._childWindow.closed)return this.initialize();Hn("send context",this._context),this._childWindow.postMessage({type:"update",data:this._context},"*")}},{key:"setContext",value:function(t){this._content=t,this._sendContext()}},{key:"initialize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Hn("initialize"),this._context=t,this._childWindow&&this._childWindow.close(),this._initialized=!1,this._childWindow=window.open("https://app.stitchdata.com/v2/js-client"),this._pollForChildWindowClosed()}},{key:"close",value:function(){Hn("close"),this._childWindow&&this._childWindow.close()}}]),t}(),Yn={},Bn={};k(Bn,Y("iterator"),function(){return this});var Zn=Y("iterator"),Jn=!([].keys&&"next"in[].keys()),qn="values",Qn=function(){return this},Xn=function(t,n,e,r,o,i,c){!function(t,n,e){t.prototype=Rt(Bn,{next:L(1,e)}),J(t,n+" Iterator")}(e,n,r);var u,a,f,s=function(t){if(!Jn&&t in d)return d[t];switch(t){case"keys":case qn:return function(){return new e(this,t)}}return function(){return new e(this,t)}},l=n+" Iterator",p=o==qn,h=!1,d=t.prototype,v=d[Zn]||d["@@iterator"]||o&&d[o],y=!Jn&&v||s(o),_=o?p?s("entries"):y:void 0,b="Array"==n?d.entries||v:v;if(b&&(f=mn(b.call(new t)))!==Object.prototype&&f.next&&J(f,l,!0),p&&v&&v.name!==qn&&(h=!0,y=function(){return v.call(this)}),c&&(Jn||h||!d[Zn])&&k(d,Zn,y),Yn[n]=y,Yn[l]=Qn,o)if(u={values:p?y:s(qn),keys:i?y:s("keys"),entries:_},c)for(a in u)a in d||D(d,a,u[a]);else M(M.P+M.F*(Jn||h),n,u);return u},$n=function(t){return function(n,e){var r,o,i=String(et(n)),c=ct(e),u=i.length;return c<0||c>=u?t?"":void 0:(r=i.charCodeAt(c))<55296||r>56319||c+1===u||(o=i.charCodeAt(c+1))<56320||o>57343?t?i.charAt(c):r:t?i.slice(c,c+2):o-56320+(r-55296<<10)+65536}}(!0);Xn(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,n=this._t,e=this._i;return e>=n.length?{value:void 0,done:!0}:(t=$n(n,e),this._i+=t.length,{value:t,done:!1})});var te=function(t,n){return{value:n,done:!!t}};Xn(Array,"Array",function(t,n){this._t=rt(t),this._i=0,this._k=n},function(){var t=this._t,n=this._k,e=this._i++;return!t||e>=t.length?(this._t=void 0,te(1)):te(0,"keys"==n?e:"values"==n?t[e]:[e,t[e]])},"values");Yn.Arguments=Yn.Array;for(var ne=Y("toStringTag"),ee="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),re=0;re<ee.length;re++){var oe=ee[re],ie=s[oe],ce=ie&&ie.prototype;ce&&!ce[ne]&&k(ce,ne,oe),Yn[oe]=Yn.Array}var ue,ae,fe,se=function(t,n,e,r){try{return r?n(T(e)[0],e[1]):n(e)}catch(n){var o=t.return;throw void 0!==o&&T(o.call(t)),n}},le=Y("iterator"),pe=Array.prototype,he=Y("iterator"),de=v.getIteratorMethod=function(t){if(void 0!=t)return t[he]||t["@@iterator"]||Yn[Wn(t)]},ve=n(function(t){var n={},e={},r=t.exports=function(t,r,o,i,c){var u,a,f,s,l=c?function(){return t}:de(t),p=_(o,i,r?2:1),h=0;if("function"!=typeof l)throw TypeError(t+" is not iterable!");if(function(t){return void 0!==t&&(Yn.Array===t||pe[le]===t)}(l)){for(u=at(t.length);u>h;h++)if((s=r?p(T(a=t[h])[0],a[1]):p(t[h]))===n||s===e)return s}else for(f=l.call(t);!(a=f.next()).done;)if((s=se(f,p,a.value,r))===n||s===e)return s};r.BREAK=n,r.RETURN=e}),ye=Y("species"),_e=function(t,n){var e,r=T(t).constructor;return void 0===r||void 0==(e=T(r)[ye])?n:y(e)},be=s.process,Oe=s.setImmediate,me=s.clearImmediate,ge=s.MessageChannel,Ee=s.Dispatch,Se=0,we={},Te="onreadystatechange",je=function(){var t=+this;if(we.hasOwnProperty(t)){var n=we[t];delete we[t],n()}},Pe=function(t){je.call(t.data)};Oe&&me||(Oe=function(t){for(var n=[],e=1;arguments.length>e;)n.push(arguments[e++]);return we[++Se]=function(){!function(t,n,e){var r=void 0===e;switch(n.length){case 0:return r?t():t.call(e);case 1:return r?t(n[0]):t.call(e,n[0]);case 2:return r?t(n[0],n[1]):t.call(e,n[0],n[1]);case 3:return r?t(n[0],n[1],n[2]):t.call(e,n[0],n[1],n[2]);case 4:return r?t(n[0],n[1],n[2],n[3]):t.call(e,n[0],n[1],n[2],n[3])}t.apply(e,n)}("function"==typeof t?t:Function(t),n)},ue(Se),Se},me=function(t){delete we[t]},"process"==tt(be)?ue=function(t){be.nextTick(_(je,t,1))}:Ee&&Ee.now?ue=function(t){Ee.now(_(je,t,1))}:ge?(fe=(ae=new ge).port2,ae.port1.onmessage=Pe,ue=_(fe.postMessage,fe,1)):s.addEventListener&&"function"==typeof postMessage&&!s.importScripts?(ue=function(t){s.postMessage(t+"","*")},s.addEventListener("message",Pe,!1)):ue=Te in R("script")?function(t){St.appendChild(R("script"))[Te]=function(){St.removeChild(this),je.call(t)}}:function(t){setTimeout(_(je,t,1),0)});var Re={set:Oe,clear:me},Ce=Re.set,Ne=s.MutationObserver||s.WebKitMutationObserver,Ae=s.process,Ie=s.Promise,Le="process"==tt(Ae),ke={f:function(t){return new function(t){var n,e;this.promise=new t(function(t,r){if(void 0!==n||void 0!==e)throw TypeError("Bad Promise constructor");n=t,e=r}),this.resolve=y(n),this.reject=y(e)}(t)}},Fe=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}},xe=function(t,n){if(T(t),w(n)&&n.constructor===t)return n;var e=ke.f(t);return(0,e.resolve)(n),e.promise},Me=Y("species"),De=Y("iterator"),Ge=!1;try{[7][De]().return=function(){Ge=!0}}catch(t){}var We,ze,Ue,He,Ve=Re.set,Ke=function(){var t,n,e,r=function(){var r,o;for(Le&&(r=Ae.domain)&&r.exit();t;){o=t.fn,t=t.next;try{o()}catch(r){throw t?e():n=void 0,r}}n=void 0,r&&r.enter()};if(Le)e=function(){Ae.nextTick(r)};else if(!Ne||s.navigator&&s.navigator.standalone)if(Ie&&Ie.resolve){var o=Ie.resolve();e=function(){o.then(r)}}else e=function(){Ce.call(s,r)};else{var i=!0,c=document.createTextNode("");new Ne(r).observe(c,{characterData:!0}),e=function(){c.data=i=!i}}return function(r){var o={fn:r,next:void 0};n&&(n.next=o),t||(t=o,e()),n=o}}(),Ye="Promise",Be=s.TypeError,Ze=s.process,Je=s[Ye],qe="process"==Wn(Ze),Qe=function(){},Xe=ze=ke.f,$e=!!function(){try{var t=Je.resolve(1),n=(t.constructor={})[Y("species")]=function(t){t(Qe,Qe)};return(qe||"function"==typeof PromiseRejectionEvent)&&t.then(Qe)instanceof n}catch(t){}}(),tr=function(t){var n;return!(!w(t)||"function"!=typeof(n=t.then))&&n},nr=function(t,n){if(!t._n){t._n=!0;var e=t._c;Ke(function(){for(var r=t._v,o=1==t._s,i=0,c=function(n){var e,i,c=o?n.ok:n.fail,u=n.resolve,a=n.reject,f=n.domain;try{c?(o||(2==t._h&&or(t),t._h=1),!0===c?e=r:(f&&f.enter(),e=c(r),f&&f.exit()),e===n.promise?a(Be("Promise-chain cycle")):(i=tr(e))?i.call(e,u,a):u(e)):a(r)}catch(t){a(t)}};e.length>i;)c(e[i++]);t._c=[],t._n=!1,n&&!t._h&&er(t)})}},er=function(t){Ve.call(s,function(){var n,e,r,o=t._v,i=rr(t);if(i&&(n=Fe(function(){qe?Ze.emit("unhandledRejection",o,t):(e=s.onunhandledrejection)?e({promise:t,reason:o}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",o)}),t._h=qe||rr(t)?2:1),t._a=void 0,i&&n.e)throw n.v})},rr=function(t){return 1!==t._h&&0===(t._a||t._c).length},or=function(t){Ve.call(s,function(){var n;qe?Ze.emit("rejectionHandled",t):(n=s.onrejectionhandled)&&n({promise:t,reason:t._v})})},ir=function(t){var n=this;n._d||(n._d=!0,(n=n._w||n)._v=t,n._s=2,n._a||(n._a=n._c.slice()),nr(n,!0))},cr=function t(n){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===n)throw Be("Promise can't be resolved itself");(e=tr(n))?Ke(function(){var o={_w:r,_d:!1};try{e.call(n,_(t,o,1),_(ir,o,1))}catch(t){ir.call(o,t)}}):(r._v=n,r._s=1,nr(r,!1))}catch(t){ir.call({_w:r,_d:!1},t)}}};$e||(Je=function(t){!function(t,n,e,r){if(!(t instanceof n)||void 0!==r&&r in t)throw TypeError(e+": incorrect invocation!")}(this,Je,Ye,"_h"),y(t),We.call(this);try{t(_(cr,this,1),_(ir,this,1))}catch(t){ir.call(this,t)}},(We=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=function(t,n,e){for(var r in n)e&&t[r]?t[r]=n[r]:k(t,r,n[r]);return t}(Je.prototype,{then:function(t,n){var e=Xe(_e(this,Je));return e.ok="function"!=typeof t||t,e.fail="function"==typeof n&&n,e.domain=qe?Ze.domain:void 0,this._c.push(e),this._a&&this._a.push(e),this._s&&nr(this,!1),e.promise},catch:function(t){return this.then(void 0,t)}}),Ue=function(){var t=new We;this.promise=t,this.resolve=_(cr,t,1),this.reject=_(ir,t,1)},ke.f=Xe=function(t){return t===Je||t===He?new Ue(t):ze(t)}),M(M.G+M.W+M.F*!$e,{Promise:Je}),J(Je,Ye),function(t){var n="function"==typeof v[t]?v[t]:s[t];d&&n&&!n[Me]&&I.f(n,Me,{configurable:!0,get:function(){return this}})}(Ye),He=v[Ye],M(M.S+M.F*!$e,Ye,{reject:function(t){var n=Xe(this);return(0,n.reject)(t),n.promise}}),M(M.S+!0*M.F,Ye,{resolve:function(t){return xe(this===He?Je:this,t)}}),M(M.S+M.F*!($e&&function(t,n){if(!n&&!Ge)return!1;var e=!1;try{var r=[7],o=r[De]();o.next=function(){return{done:e=!0}},r[De]=function(){return o},t(r)}catch(t){}return e}(function(t){Je.all(t).catch(Qe)})),Ye,{all:function(t){var n=this,e=Xe(n),r=e.resolve,o=e.reject,i=Fe(function(){var e=[],i=0,c=1;ve(t,!1,function(t){var u=i++,a=!1;e.push(void 0),c++,n.resolve(t).then(function(t){a||(a=!0,e[u]=t,--c||r(e))},o)}),--c||r(e)});return i.e&&o(i.v),e.promise},race:function(t){var n=this,e=Xe(n),r=e.reject,o=Fe(function(){ve(t,!1,function(t){n.resolve(t).then(e.resolve,r)})});return o.e&&r(o.v),e.promise}}),M(M.P+M.R,"Promise",{finally:function(t){var n=_e(this,v.Promise||s.Promise),e="function"==typeof t;return this.then(e?function(e){return xe(n,t()).then(function(){return e})}:t,e?function(e){return xe(n,t()).then(function(){throw e})}:t)}}),M(M.S,"Promise",{try:function(t){var n=ke.f(this),e=Fe(t);return(e.e?n.reject:n.resolve)(e.v),n.promise}});var ur=v.Promise,ar={CREATE:"CREATE",EDIT:"EDIT",AUTHORIZE:"AUTHORIZE",DISCOVER:"DISCOVER",SELECT_STREAMS:"SELECT_STREAMS"},fr=function(t){function n(t){O(this,n);var e=S(this,(n.__proto__||Un.getPrototypeOf(n)).call(this,"Integration with id "+t+" not found."));return e.constructor=n,e}return E(n,t),n}(Error),sr=function(t){function n(t){O(this,n);var e=S(this,(n.__proto__||Un.getPrototypeOf(n)).call(this,'Unknown source type: "'+t+'".'));return e.constructor=n,e}return E(n,t),n}(Error),lr=function(t){function n(){O(this,n);var t=S(this,(n.__proto__||Un.getPrototypeOf(n)).call(this,"App closed before reaching end of flow."));return t.constructor=n,t}return E(n,t),n}(Error),pr=function(t){function n(){O(this,n);var t=S(this,(n.__proto__||Un.getPrototypeOf(n)).call(this,"Error upgrading ephemeral token."));return t.constructor=n,t}return E(n,t),n}(Error);t.STEPS=ar,t.SourceNotFoundError=fr,t.UnknownSourceTypeError=sr,t.AppClosedPrematurelyError=lr,t.UpgradeEphemeralTokenError=pr,t.addSource=function(t){return a(ar.CREATE,t)},t.editSource=function(t){return a(ar.EDIT,t)},t.authorizeSource=function(t){return a(ar.AUTHORIZE,t)},t.displayDiscoveryOutputForSource=function(t){return a(ar.DISCOVER,t)},t.selectStreamsForSource=function(t){return a(ar.SELECT_STREAMS,t)},Object.defineProperty(t,"__esModule",{value:!0})});
